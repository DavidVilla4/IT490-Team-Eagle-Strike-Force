<?php
include 'recipeConnect.php';

?>
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    </head>
<body>
    <h1>Recipes</h1>
    <h2>Your Recipes:</h2>
    
    <button onClick="myFunction()">New Recipe</button>
    <form action = "recipe.php" method = "post">
	    <a href ="ingredient.html" id = "demo" type = "text" name="demo" ></a>
        <input type="text" name = "demo">
	<button type = "submit">Save</button>
        </form>
    <p id="recipes">
	<?php include 'recipeConnect.php';

    $type = "viewAllRecipes";
    echo $type;
    $request = array();
    $request['type']=$type;
    echo "<br>";
    echo $request['type'];
    $response = $client->send_request($request);
    echo "<br>";
    echo "client received response: ".PHP_EOL;

    print_r($response);
    if($response['returnCode'] == "1")
    {
    echo "hello world1";
    while($row=mysqli_fetch_array($response['allRecipes']))
		{
            echo "hello world";
			echo "<p>";
			echo $row;
            echo "<br>";
            echo "<br>";
		}
    }
    else
    {
        echo "you do not have any recipes yet";
    }
	?>
    </p>
    <script>
    var array = [];
    function myFunction()
        {
            var recipe = prompt("Please name the new recipe");
	    array.push(recipe+'<br>');
            //send name to database, have database respond
            document.getElementById("demo").innerHTML= array.join(" ");
            //open up new recipe page that directly connects to the database created
            
        }
       
    </script>
     
</body>
</html>
